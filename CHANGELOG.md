# Changelog

## [0.20.0](https://github.com/aofei/.goproxy.goproxy/compare/v0.19.0...v0.20.0) (2024-06-23)


### Features

* add `Cache.MIMEType` ([1416280](https://github.com/aofei/.goproxy.goproxy/commit/1416280f9da4c14a908f3ac42537ccee6f292c0d))
* add `cacher.MinIO.BucketLocation` ([15a5943](https://github.com/aofei/.goproxy.goproxy/commit/15a59435468c8aae54485a49efcbcdc41c1e68ea))
* add `Cacher.NewHash` ([eefc8d7](https://github.com/aofei/.goproxy.goproxy/commit/eefc8d7993782a94d987f601ab6020130c79fe0e))
* add `Fetcher` to fetch module files for `Goproxy` ([35f6d27](https://github.com/aofei/.goproxy.goproxy/commit/35f6d27fc262a731ffdbed60b05ba4226b4eca5d)), closes [#46](https://github.com/aofei/.goproxy.goproxy/issues/46)
* add `Goproxy.DisableNotFoundLog` ([689264d](https://github.com/aofei/.goproxy.goproxy/commit/689264d3a01f6af973480e0ded0d76a12029835c))
* add `Goproxy.GoBinEnv` ([7efe0d1](https://github.com/aofei/.goproxy.goproxy/commit/7efe0d178bc02f19ccaba2bc2af283bfb1d25803))
* add `Goproxy.GoBinFetchTimeout` ([b67483b](https://github.com/aofei/.goproxy.goproxy/commit/b67483bd3534f5de05b8b69f1e2e7950086bbc56))
* add `Goproxy.InsecureMode` ([d6e5a3c](https://github.com/aofei/.goproxy.goproxy/commit/d6e5a3c95c2cafc5da951bdf63c16d95350c25ad))
* add `Goproxy.MaxZIPCacheBytes` ([556dc35](https://github.com/aofei/.goproxy.goproxy/commit/556dc35cb4f66c8cbe298335f2ec46f02b33cd8d))
* add `Goproxy.ProxiedSUMDBURLs` ([6475c98](https://github.com/aofei/.goproxy.goproxy/commit/6475c98c57762d75c03371e9dd193b8365f4db78))
* add `Goproxy.TempDir` ([46e02ef](https://github.com/aofei/.goproxy.goproxy/commit/46e02efdb5e4d24b11e3719d2a472c1767a4709a)), closes [#27](https://github.com/aofei/.goproxy.goproxy/issues/27)
* add `httpDo` ([ee91433](https://github.com/aofei/.goproxy.goproxy/commit/ee914331fd0f96ca265f687326baa9205a0792b1))
* add `modClean` ([f3f6a02](https://github.com/aofei/.goproxy.goproxy/commit/f3f6a0231ac0f8a757ebb080a585d4aa8e53f6de))
* add Alibaba Cloud Object Storage Service support ([4cb1818](https://github.com/aofei/.goproxy.goproxy/commit/4cb1818dacde0ea6bc47758a5a47e20c82d0cfb0))
* add Amazon Simple Storage Service support ([42bd5ce](https://github.com/aofei/.goproxy.goproxy/commit/42bd5ce57114b8a1bf1f613cef259d05d33ba297))
* add built-in GONOPROXY support ([7102a9d](https://github.com/aofei/.goproxy.goproxy/commit/7102a9da8d138a374f45508a395c64facda6c8ab))
* add built-in GOPRIVATE support ([b9c9b16](https://github.com/aofei/.goproxy.goproxy/commit/b9c9b1694c4f4bb3b1c68784dedf01d218b87b60))
* add built-in GOSUMDB and GONOSUMDB support ([d97a712](https://github.com/aofei/.goproxy.goproxy/commit/d97a712ebedc2779486cbd7dc556755ef8727cf2))
* add Cache-Control header support ([756c675](https://github.com/aofei/.goproxy.goproxy/commit/756c675ee11aad9757ecc6945c9355ce2e5346f3))
* add CLI implementation ([cdc4fb1](https://github.com/aofei/.goproxy.goproxy/commit/cdc4fb1e9d06915554ee2ce2d4e48f8c8e9e8260)), closes [#33](https://github.com/aofei/.goproxy.goproxy/issues/33)
* add DigitalOcean Spaces support ([397f9ff](https://github.com/aofei/.goproxy.goproxy/commit/397f9ffa830ce2d4eede4eca3af13d0b64a45298))
* add Disable-Module-Fetch header support ([5154c7b](https://github.com/aofei/.goproxy.goproxy/commit/5154c7b060b92124f206355f9d13e183f1660deb)), closes [#39](https://github.com/aofei/.goproxy.goproxy/issues/39)
* add Google Cloud Storage support ([edfd58b](https://github.com/aofei/.goproxy.goproxy/commit/edfd58bf6351e8ee8ba5bcf8ee02048555baa6eb))
* add implementation ([955cc09](https://github.com/aofei/.goproxy.goproxy/commit/955cc09753f90a33d697b2822b26658312b81229))
* add Microsoft Azure Blob Storage support ([ea53e5b](https://github.com/aofei/.goproxy.goproxy/commit/ea53e5b4145e6fe09ff53c7e4307d87011f20a0f))
* add MinIO support ([b68bf1c](https://github.com/aofei/.goproxy.goproxy/commit/b68bf1ced14646da545485b38994175fa905a2b9))
* add pipe (|) support to built-in GOPROXY support ([#14](https://github.com/aofei/.goproxy.goproxy/issues/14)) ([062fc67](https://github.com/aofei/.goproxy.goproxy/commit/062fc67148aeb0a121fda67d879beb5d3af4325f))
* add Qiniu Cloud Kodo support ([c3aa0ea](https://github.com/aofei/.goproxy.goproxy/commit/c3aa0ea9f3677cb88833e287aeeaafadbbf2ec50))
* add retry support for URL determination in `sumdbClientOps` ([bcbfe5c](https://github.com/aofei/.goproxy.goproxy/commit/bcbfe5cb7ce0a69f797c4d24afe0f55d4ff97ad5))
* add virtual hosted endpoint support ([5181dfa](https://github.com/aofei/.goproxy.goproxy/commit/5181dfae612be37680e8c55bddd5dbbbaaf9f5e5))
* cache module files for all valid operations ([5da185b](https://github.com/aofei/.goproxy.goproxy/commit/5da185bd2f83c4179cb54b542476f0d90322a17b))
* cache module version list ([e3edbe4](https://github.com/aofei/.goproxy.goproxy/commit/e3edbe46a707abcec4c7c73acc84713741c74c25))
* cache proxied checksum database content ([040c85e](https://github.com/aofei/.goproxy.goproxy/commit/040c85eb77a01506d86ede101a116eb4326545b6))
* **Cacher:** support optional `interface{ Size() int64 }` for Content-Length header ([#60](https://github.com/aofei/.goproxy.goproxy/issues/60)) ([546d218](https://github.com/aofei/.goproxy.goproxy/commit/546d21817ed7ccf9fd925ee3262ce23dfa4aeb5c))
* **cmd/goproxy:** add file URI scheme support ([8bc16cc](https://github.com/aofei/.goproxy.goproxy/commit/8bc16cc0d60cf4c1f3d8d4d2d104e2aa26b34161))
* **cmd/goproxy:** add graceful shutdown support for `server` ([1577139](https://github.com/aofei/.goproxy.goproxy/commit/1577139a82b581b9622ed2e6e221dacbdf2a25e8))
* **cmd/goproxy:** add S3 cacher support for `server` ([06671ed](https://github.com/aofei/.goproxy.goproxy/commit/06671ed85120fc5567e0aa6b6f3905ce53abcc29))
* implement auto-retry mechanism for `httpGet` ([7fe9350](https://github.com/aofei/.goproxy.goproxy/commit/7fe9350870611b186e5df06f360141f5b9f137c6))
* release test 1 ([f8d18f6](https://github.com/aofei/.goproxy.goproxy/commit/f8d18f620801c8d8ee7dbc9a0699a23335679ebf))
* release test 2 ([f75ee3e](https://github.com/aofei/.goproxy.goproxy/commit/f75ee3e4f354debab7b6493e08b0c7ac2d8030a6))
* use exponential backoff algorithm in `httpGet` ([2a31997](https://github.com/aofei/.goproxy.goproxy/commit/2a319979eb82dfe5b30966e3ace34b1bcf134bde))


### Bug Fixes

* avoid removing persistent files ([9370087](https://github.com/aofei/.goproxy.goproxy/commit/93700871d74c204d406e34773ecaca1e2a769edf))
* correct `cacher.MinIO.Cache` ([f5ac410](https://github.com/aofei/.goproxy.goproxy/commit/f5ac41031fbc00fa9859c3aed48f2a6e4514bf08))
* correct `cachers.gcsCache.Read` and `cachers.kodoCache.Read` ([461dbca](https://github.com/aofei/.goproxy.goproxy/commit/461dbca069dca2a4d2ae24a5879aae3ba8fa920f))
* correct `cachers.MinIO.load` ([8db30a4](https://github.com/aofei/.goproxy.goproxy/commit/8db30a4e47463a2dd5b28099fcd4822fc416d1d2))
* correct `cachers.OSS.Cache` ([16bf28a](https://github.com/aofei/.goproxy.goproxy/commit/16bf28add86dc4d23aec91e2179f226a182b502e))
* correct `cachers.OSS.load` ([d65e44c](https://github.com/aofei/.goproxy.goproxy/commit/d65e44cf5aad404028250187a11e62bb30c8a2a0))
* correct `mod` ([4040498](https://github.com/aofei/.goproxy.goproxy/commit/40404984165d12b594b127665f06653efeca630f))
* correct `mod` ([670c16f](https://github.com/aofei/.goproxy.goproxy/commit/670c16f2a24672283eddc30d04e7ff6592a0e197))
* correct `regModuleVersionNotFound` ([9218d66](https://github.com/aofei/.goproxy.goproxy/commit/9218d669c3b72ebea0f7e216f9508c1120485932))
* correct auto-retry on `http.Client.Do` error for `httpGet` ([39d1074](https://github.com/aofei/.goproxy.goproxy/commit/39d1074b493a73007382f95e2e6813e7a2f21705))
* correct behavior of `tempCache.Close` ([b531d8a](https://github.com/aofei/.goproxy.goproxy/commit/b531d8a7e9331b9b5969a6f4f3bf189c32ad0b2b))
* correct built-in GOPROXY=off behavior ([e7b1931](https://github.com/aofei/.goproxy.goproxy/commit/e7b193158945da3787c4be1eb23caf483dc5ac01))
* correct built-in GOSUMDB implementation ([67f6616](https://github.com/aofei/.goproxy.goproxy/commit/67f66166621ab848467ad7608ee0317e332d4688))
* correct built-in GOSUMDB support ([7f3667c](https://github.com/aofei/.goproxy.goproxy/commit/7f3667c91fa60f2d6ee6bf8e03ea5b932c7699b5))
* correct cache checksum computing of Qiniu Cloud Kodo ([cfa5347](https://github.com/aofei/.goproxy.goproxy/commit/cfa5347fd501c7df9d66dcd887a3389dc9d9c2af))
* correct Cache-Control header management ([bd212f1](https://github.com/aofei/.goproxy.goproxy/commit/bd212f102dc3a0a3011cf4ced613a056f69cbef1))
* correct error handling ([37a8141](https://github.com/aofei/.goproxy.goproxy/commit/37a81413eee29dca54a0eb11680e17bdb240b7b0))
* correct error handling in `sumdbClientOps.load` ([34d5dcf](https://github.com/aofei/.goproxy.goproxy/commit/34d5dcfbb37745824d2bd0d55beb8426f5d5f5b4))
* correct GOPRIVATE behavior ([635a05a](https://github.com/aofei/.goproxy.goproxy/commit/635a05a39f3338075945b6a1c05273d97aa6fa21))
* correct module path and version matching in `Goproxy.serveFetch` ([d5c240a](https://github.com/aofei/.goproxy.goproxy/commit/d5c240a7cbce0478adb384d7f783d009193b7878))
* correct proxying checksum database support ([8edbf95](https://github.com/aofei/.goproxy.goproxy/commit/8edbf959bc61502687dae2d7d28209d09a270934))
* correct proxying checksum database support ([510c7b2](https://github.com/aofei/.goproxy.goproxy/commit/510c7b2b78f3888ff8b3e95be24cc5606244377d))
* correct some improper stuff ([#13](https://github.com/aofei/.goproxy.goproxy/issues/13)) ([fecaf5c](https://github.com/aofei/.goproxy.goproxy/commit/fecaf5c0ed0a5c747a56d25bdf316469d1015f67))
* correct temporary file reading ([4aab780](https://github.com/aofei/.goproxy.goproxy/commit/4aab78027136daaa2503d13400f12c72e54db57e))
* correct timeout control ([dffe6d0](https://github.com/aofei/.goproxy.goproxy/commit/dffe6d0198ecc71d2bb159f850469f19649969d8))
* **Dockerfile:** git lfs install global ([#56](https://github.com/aofei/.goproxy.goproxy/issues/56)) ([4254665](https://github.com/aofei/.goproxy.goproxy/commit/4254665ab65c1d6caee6a1ea4cabf9039bc60099))
* release test 4 ([e808f9f](https://github.com/aofei/.goproxy.goproxy/commit/e808f9fc8c961657bc1d047c3f082bf96a016fb2))
* remove shadowed var `content` in else block to avoid passing a nil to io.Copy() ([#23](https://github.com/aofei/.goproxy.goproxy/issues/23)) ([862e2ae](https://github.com/aofei/.goproxy.goproxy/commit/862e2ae0e015fa784a03609f7139d776c0a66f0c))
* set status code in responseString ([5279985](https://github.com/aofei/.goproxy.goproxy/commit/52799853012f1468d1fc2ce19575d40076aa7606))
* set status code in responseString ([523a2a5](https://github.com/aofei/.goproxy.goproxy/commit/523a2a534ddc8baa8ac07edc06447beb3725f8f4))


### Reverts

* chore: bump github.com/minio/minio-go/v7 ([e848349](https://github.com/aofei/.goproxy.goproxy/commit/e848349f0d1b8c5b901c7ca9deb65c67ede0a566))
* chore: use minio-go v6.0.56 ([afbee04](https://github.com/aofei/.goproxy.goproxy/commit/afbee04425f899cb171ae968f37ddef816045cd5))
* refactor: ignore `context.Canceled` when it's harmless ([b044dd5](https://github.com/aofei/.goproxy.goproxy/commit/b044dd53e11455eb7030653eb84b70315a61cdf0))
* refactor: improve error logging ([2125edc](https://github.com/aofei/.goproxy.goproxy/commit/2125edc8f64c935f702576f36398482b24bb64bd))
* refactor: make temporary directories more tidy ([f99edf5](https://github.com/aofei/.goproxy.goproxy/commit/f99edf507f05267841cc4e942dd9f8b002a8c4a8))
* refactor: make up for `os.RemoveAll` failures ([96deee2](https://github.com/aofei/.goproxy.goproxy/commit/96deee22768adbef52a9adc54d44d8e923b351d1))
